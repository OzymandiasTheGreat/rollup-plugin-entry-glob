{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { createFilter } from 'rollup-pluginutils';\nimport matched from 'matched';\n\n\nconst name = 'entry-glob';\nconst entry = '\\0rollup-plugin-entry-glob:single-entry';\n\n\nexport default function entryGlob(options) {\n\tconst module = options.fileName\n\t\t? `\\0${options.fileName}`\n\t\t: entry;\n\tconst filter = options.include || options.exclude\n\t\t? createFilter(options.include, options.exclude)\n\t\t: createFilter('**/*');\n\tconst imports = [];\n\tconst exporter = (path) => `export * from ${JSON.stringify(path)};`;\n\tconst importer = (path) => `import ${JSON.stringify(path)};`;\n\toptions.exports = options.exports === undefined || options.exports === true\n\t\t? true\n\t\t: false;\n\n\treturn {\n\t\tname,\n\n\t\toptions(config) {\n\t\t\tconst ret = [module];\n\t\t\tif (config.input && config.input !== module) {\n\t\t\t\tmatched.sync(config.input, { realpath: true })\n\t\t\t\t\t.forEach((path) => {\n\t\t\t\t\t\tif (filter(path)) imports.push(path);\n\t\t\t\t\t\telse ret.push(path);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tconfig.input = ret;\n\t\t},\n\n\t\tresolveId(id) {\n\t\t\tif (id === module) return module;\n\t\t\treturn null;\n\t\t},\n\n\t\tasync load(id) {\n\t\t\tif (id === module) {\n\t\t\t\tif (!imports.length) return Promise.resolve('');\n\t\t\t\treturn Promise.resolve(options.exports\n\t\t\t\t\t? imports.map(exporter).join('\\n')\n\t\t\t\t\t: imports.map(importer).join('\\n'));\n\t\t\t}\n\t\t},\n\t};\n}\n"],"names":["name","entry","entryGlob","options","const","module","fileName","filter","include","exclude","createFilter","imports","exporter","path","JSON","stringify","importer","exports","undefined","config","ret","input","matched","sync","realpath","forEach","push","resolveId","id","load","length","Promise","resolve","map","join"],"mappings":"iMAIMA,KAAO,aACPC,MAAQ,0CAGC,SAASC,UAAUC,GACjCC,IAAMC,EAASF,EAAQG,cACfH,EAAgB,SACrBF,MACGM,EAASJ,EAAQK,SAAWL,EAAQM,QACvCC,+BAAaP,EAAQK,QAASL,EAAQM,SACtCC,+BAAa,QACVC,EAAU,GACVC,WAAYC,0BAA0BC,KAAKC,UAAUF,QACrDG,WAAYH,mBAAmBC,KAAKC,UAAUF,QAKpD,OAJAV,EAAQc,aAA8BC,IAApBf,EAAQc,UAA6C,IAApBd,EAAQc,QAIpD,MACNjB,KAEAG,iBAAQgB,GACPf,IAAMgB,EAAM,CAACf,GACTc,EAAOE,OAASF,EAAOE,QAAUhB,GACpCiB,QAAQC,KAAKJ,EAAOE,MAAO,CAAEG,UAAU,IACrCC,iBAASZ,GACLN,EAAOM,GAAOF,EAAQe,KAAKb,GAC1BO,EAAIM,KAAKb,KAGjBM,EAAOE,MAAQD,GAGhBO,mBAAUC,GACT,OAAIA,IAAOvB,EAAeA,EACnB,MAGRwB,oBAAWD,GACV,GAAIA,IAAOvB,EACV,OAAKM,EAAQmB,OACNC,QAAQC,QAAQ7B,EAAQc,QAC5BN,EAAQsB,IAAIrB,GAAUsB,KAAK,MAC3BvB,EAAQsB,IAAIjB,GAAUkB,KAAK,OAHFH,QAAQC,QAAQ"}